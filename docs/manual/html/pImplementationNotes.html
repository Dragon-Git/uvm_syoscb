<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SyoSil ApS UVM Scoreboard: General implementation notes</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="style.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SyoSil ApS UVM Scoreboard
   &#160;<span id="projectnumber">1.0.3.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">General implementation notes </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This chapter contains some background information on the architecture of the scoreboard.</p>
<h1><a class="anchor" id="sGeneralStructure"></a>
General structure</h1>
<p>Each scoreboard (<a class="el" href="classcl__syoscb.html" title="Top level class implementing the root of the SyoSil UVM scoreboard. ">cl_syoscb</a>) consists of a number of queues (see <a class="el" href="pQueueImplementationNotes.html">Queue implementation notes</a>). A scoreboard should have as many queues as there are models being tested. If e.g. the testbench compares a DUT to a single reference model, two queues, "DUT" and "REF" should be instantiated. Each queue is associated with a number of producers. If e.g. the inputs and outputs of the DUT/REF are being sampled, these producers may be named "IN" and "OUT".</p>
<p>The scoreboard operates by using TLM connections or the function-based API to receive data sampled by a UVM monitor or a VC. The scoreboard has a subscriber for each producer on each queue. When a sequence item is written to a subscriber, the sequence item is wrapped in a <a class="el" href="classcl__syoscb__item.html" title="The UVM scoreboard item which wraps uvm_sequence_item . ">cl_syoscb_item</a> before it is added to the correct queue. The <a class="el" href="classcl__syoscb__item.html" title="The UVM scoreboard item which wraps uvm_sequence_item . ">cl_syoscb_item</a> is a wrapper item which includes some metadata such as which producer generated the item.</p>
<p>The queues in the scoreboard store sequence items until at least one sequence item is present in each queue. When this condition is met, a comparison is started, based on the chosen compare algorithm (see <a class="el" href="pCompareImplementationNotes.html">Compare implementation notes</a>). Every time an item is inserted during simulation, the scoreboard checks if all queues contain an item, and starts a comparison if this is the case. It does so throughout the entire simulation. If any errors occur, the scoreboard will generate a UVM_ERROR. See <a class="el" href="pDebugFeatures.html">Debugging features</a> for more information on the debugging features that the scoreboard includes.</p>
<p>Note that when using the SyoSil UVM Scoreboard, the reference model and scoreboard are completely separated, which is not the case in many other UVM scoreboards. By separating scoreboard and reference model, we achieve separation of concerns, making both the reference model and scoreboard simpler to use and instantiate in other testbenches.</p>
<h1><a class="anchor" id="sClassDiagram"></a>
Class diagram</h1>
<p>A UML class diagram of the SyoSCB is shown below. The PDF version of the manual also includes a PDF diagram, which allows you to zoom in further than the PNG file used in the HTML version of the manual.</p>
<div class="image">
<img src="class_diagram.drawio.png" alt="class_diagram.drawio.png" width="60%"/>
</div>
 <p>Classes highlighted with blue make up the core 4 aspects of the scoreboard: configuration, queues, compare strategy and the scoreboard itself. Classes with italicized names are abstract base classes that should not be implemented. Grey classes are from the UVM class hierarchy, and have been included for visualization purposes only. They are not included in the scoreboard's source code.</p>
<h1><a class="anchor" id="sGeneralErrorHandling"></a>
General error handling</h1>
<p>Whenever a method detects an error, two error handling concepts are used:</p>
<p>Getter methods and other methods with a return value will generally issue a UVM_INFO message at verbosity level UVM_DEBUG with some information about what went wrong, returning <code>1'b0</code> or <code>null</code> to signal an error. It is up to the calling method to respond to and handle the error, or escalate it to a UVM_ERROR / UVM_FATAL.</p>
<p>Setter methods and other methods without a return value will issue a UVM_ERROR or UVM_FATAL, as they have no other way of signalling errors. Again, it is the responsibility of the caller to potentially catch and handle these errors.</p>
<h2><a class="anchor" id="ssErrorCategories"></a>
Error categories</h2>
<p>There are several categories of errors used throughout the scoreboard. The following table lists some of them along with a possible cause for the error.</p>
<table class="doxtable">
<tr>
<th>Error Category </th><th>Description  </th></tr>
<tr>
<td>IMPL_ERROR </td><td>Implementation error. Something is really broken  </td></tr>
<tr>
<td>QUEUE_ERROR </td><td>A queue related error, e.g. the queue could not be found  </td></tr>
<tr>
<td>CFG_ERROR </td><td>Configuration error. Usually because the configuration object is missing  </td></tr>
<tr>
<td>TYPE_ERROR </td><td>Type error. Typically issued when $cast() fails  </td></tr>
<tr>
<td>COMPARE_ERROR </td><td>Compare error. Issued, e.g. when the in order compare fails  </td></tr>
<tr>
<td>SUBSCRIBER_ERROR </td><td>Subscriber error. Issued, e.g. when the call to <a class="el" href="classcl__syoscb.html#a1d3983a0946cc4e38f74b249b5bb0e16" title="Scoreboard API: Returns a UVM subscriber for a given combination of queue and producer. ">cl_syoscb::get_subscriber()</a> fails  </td></tr>
<tr>
<td>ITERATOR_ERROR </td><td>Iterator error. Issued when an iterator cannot be found in <a class="el" href="classcl__syoscb__queue__hash.html" title="Class which represents the base concept of a hash queue. ">cl_syoscb_queue_hash</a>   </td></tr>
</table>
<h1><a class="anchor" id="sMultipleQueueRefs"></a>
Multiple queue references</h1>
<p>Both the top level scoreboard class <a class="el" href="classcl__syoscb.html" title="Top level class implementing the root of the SyoSil UVM scoreboard. ">cl_syoscb</a> and the configuration class <a class="el" href="classcl__syoscb__cfg.html" title="Configuration class for the SyoSil UVM scoreboard. ">cl_syoscb_cfg</a> contain handles to all queues. The former uses an ordinary array which provides a fast way of looping over the queues and the latter an associative which makes it easy to find a queue using only its name. Using either reference is OK, use the approach best suited for a given operation.</p>
<h1><a class="anchor" id="sValidQueueCompareCombinations"></a>
Valid queue/compare type combinations</h1>
<p>In the table below, an overview of all queue and compare type combinations is shown, as well as their possible limitations. See <a class="el" href="pQueueImplementationNotes.html">Queue implementation notes</a> and <a class="el" href="pCompareImplementationNotes.html">Compare implementation notes</a> for additional information on queue topologies and comparison strategies.</p>
<table class="doxtable">
<tr>
<td></td><td>STD Queue  </td><td>MD5 Queue   </td></tr>
<tr>
<td>IO Compare </td><td>Recommended  </td><td>Works if <a class="el" href="classcl__syoscb__cfg.html#a1c236f5dd8245075221d07d9475b0f9d" title="Controls whether a strict item ordering should be used in assoc. ">cl_syoscb_cfg.ordered_next</a> = 1. Not recommended  </td></tr>
<tr>
<td>IOP Compare </td><td>Recommended  </td><td>Works if <a class="el" href="classcl__syoscb__cfg.html#a1c236f5dd8245075221d07d9475b0f9d" title="Controls whether a strict item ordering should be used in assoc. ">cl_syoscb_cfg.ordered_next</a> = 1. Not recommended  </td></tr>
<tr>
<td>IO-2HP Compare </td><td>Recommended  </td><td>Works if <a class="el" href="classcl__syoscb__cfg.html#a1c236f5dd8245075221d07d9475b0f9d" title="Controls whether a strict item ordering should be used in assoc. ">cl_syoscb_cfg.ordered_next</a> = 1. Not recommended  </td></tr>
<tr>
<td>OOO Compare </td><td>Works, slow on very large datasets (see <a class="el" href="pQueueImplementationNotes.html">Queue implementation notes</a>) </td><td>Works, recommended approach for large datasets. Incurs a slight performance hit if <a class="el" href="classcl__syoscb__cfg.html#a1c236f5dd8245075221d07d9475b0f9d" title="Controls whether a strict item ordering should be used in assoc. ">cl_syoscb_cfg.ordered_next</a> = 1   </td></tr>
</table>
</div></div><!-- contents -->
<!--*************************************************************************-->
<!-- $Id$          -->
<!--*************************************************************************-->
<!--   This program is free software: you can redistribute it and/or modify  -->
<!--   it under the terms of the GNU General Public License as published by  -->
<!--   the Free Software Foundation, either version 3 of the License, or     -->
<!--   (at your option) any later version.                                   -->
<!--                                                                         -->
<!--   This program is distributed in the hope that it will be useful,       -->
<!--   but WITHOUT ANY WARRANTY; without even the implied warranty of        -->
<!--   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         -->
<!--   GNU General Public License for more details.                          -->
<!--                                                                         -->
<!--   You should have received a copy of the GNU General Public License     -->
<!--   along with this program.  If not, see http://www.gnu.org/licenses/.   -->
<!--                                                                         -->
<!--*************************************************************************-->
<!-- Title:        IDV Doxygen Footer File                                   -->
<!-- Description:  This file is a doxygen footer with the IDV logo and a     -->
<!--               and a reference to the GNU FDL License.                   -->
<!--                                                                         -->
<!-- Original Author: Sean O'Boyle                                           -->
<!-- Contact:         seanoboyle@intelligentdv.com                           -->
<!-- Company:         Intelligent Design Verification                        -->
<!-- Company URL:     http://intelligentdv.com                               -->
<!--                                                                         -->
<!-- Download the most recent version here:                                  -->
<!--                  http://intelligentdv.com/downloads                     -->
<!--                                                                         -->
<!-- File Bugs Here:  http://bugs.intelligentdv.com                          -->
<!--        Project:  DoxygenFilterSV                                        -->
<!--                                                                         -->
<!-- File: idv_dox_header.xml                                                -->
<!-- $LastChangedBy$                                            -->
<!-- $LastChangedDate$        -->
<!-- $LastChangedRevision$                                             -->
<!--                                                                         -->
<!--*************************************************************************-->
<br>
<table border="1" width = "100%">
  <tr>
    <td width = "20%" style="text-align: center">
     <a href="https://syosil.com">
      <img src="syosil.jpg" width="70%">
     </a>
    </td>
    <td width = "60%">
       <address style="text-align: center;">
       Project: SyoSil ApS UVM Scoreboard, Revision: 1.0.3.0<br>
       <br>
       Copyright 2014-2022 SyoSil ApS<br>
       All Rights Reserved Worldwide<br>
       <br>
      Licensed under the Apache License, Version 2.0 (the "License"); you may not
      use this file except in compliance with the License.  You may obtain a copy of
      the License at<br>
      <br>
       <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a><br>
      <br>
      Unless required by applicable law or agreed to in writing, software distributed under the License is
      distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
      implied. See the License for the specific language governing permissions and limitations under
      the License.
      </address>
    </td>
    <td width = "20%">
      <address style="text-align: center;"><small>
      <a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border="0"></a><br>
      <a href="http://www.doxygen.org/index.html">Doxygen</a> Version: 1.8.14<br>
      Generated with <a href="http://www.intelligentdv.com/index.html">IDV SV Filter</a> Version: 2.6.3<br>
      Fri Sep 2 2022 14:40:36</small></address>
   </td>
  </tr>
</table>
<address style="text-align: left;"><small>
Find a documentation bug?  Report bugs to: <a href="mailto:scoreboard@syosil.com">scoreboard@syosil.com</a>
</small></address>
</body>
</html>
