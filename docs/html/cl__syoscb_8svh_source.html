<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>SyoSil ApS UVM Scoreboard: cl_syoscb.svh Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
  <div class="navpath"><a class="el" href="dir_562324e130495ce1321e3e3f14c8d761.html">src</a>
  </div>
</div>
<div class="contents">
<h1>cl_syoscb.svh</h1><a href="cl__syoscb_8svh.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a><a class="code" href="classcl__syoscb.html">00001</a> <span class="keyword">class </span><a class="code" href="classcl__syoscb.html">cl_syoscb</a> <span class="keyword">extends</span> uvm_scoreboard;
<a name="l00002"></a>00002 
<a name="l00003"></a><a class="code" href="classcl__syoscb.html#ad2ae3f40dfef089783087874787ab1b7">00003</a>    <a class="code" href="classcl__syoscb__cfg.html">cl_syoscb_cfg</a> <a class="code" href="classcl__syoscb.html#ad2ae3f40dfef089783087874787ab1b7">cfg</a>;
<a name="l00004"></a><a class="code" href="classcl__syoscb.html#a4f5ac6f44453c7e25ad753723693c9d1">00004</a>    <a class="code" href="classcl__syoscb__queue.html">cl_syoscb_queue</a> <a class="code" href="classcl__syoscb.html#a4f5ac6f44453c7e25ad753723693c9d1">queues</a>[];
<a name="l00005"></a><a class="code" href="classcl__syoscb.html#a71521d7baf421c4f12073b16f71b8220">00005</a>    <a class="code" href="classcl__syoscb__compare.html">cl_syoscb_compare</a> <a class="code" href="classcl__syoscb.html#a71521d7baf421c4f12073b16f71b8220">compare_strategy</a>;
<a name="l00006"></a>00006 
<a name="l00007"></a>00007    `<a class="code" href="classcl__syoscb.html#ae167d33d7b1a8e35ca3be6864c09628d">uvm_component_utils_begin</a>(cl_syoscb)
<a name="l00008"></a>00008      `uvm_field_object(cfg, UVM_ALL_ON)
<a name="l00009"></a>00009      `<a class="code" href="classcl__syoscb.html#a84de778298a817ed8a515a3017e0ab73">uvm_field_array_object</a>(queues, UVM_ALL_ON)
<a name="l00010"></a>00010      `uvm_field_object(compare_strategy, UVM_ALL_ON)
<a name="l00011"></a>00011    `uvm_component_utils_end
<a name="l00012"></a>00012 
<a name="l00013"></a>00013    extern function <a class="code" href="classcl__syoscb.html#a34d30eb8ec451e2257e972b427ebc9a7">new</a>(string name, uvm_component parent);
<a name="l00014"></a>00014    extern function void <a class="code" href="classcl__syoscb.html#aff5b55683b8bb74b5b75f607ac043602">build_phase</a>(uvm_phase phase);
<a name="l00015"></a>00015    extern function void <a class="code" href="classcl__syoscb.html#a065af329e4379b0416c7632c87158943">check_phase</a>(uvm_phase phase);
<a name="l00016"></a>00016    extern function void <a class="code" href="classcl__syoscb.html#ae54aafecd74c7f5a6531349d4bbe7c65">report_phase</a>(uvm_phase phase);
<a name="l00017"></a>00017    extern function bit <a class="code" href="classcl__syoscb.html#afa4a72326d0672809361fdc3e57fc78d">compare</a>();
<a name="l00018"></a>00018    extern function void <a class="code" href="classcl__syoscb.html#a26c59c91c6fdd22f29a411cba2d5ed8f">add_item</a>(string queue_name, string producer, uvm_sequence_item item);
<a name="l00019"></a>00019 endclass: <a class="code" href="classcl__syoscb.html">cl_syoscb</a>
<a name="l00020"></a>00020 
<a name="l00021"></a><a class="code" href="classcl__syoscb.html#a34d30eb8ec451e2257e972b427ebc9a7">00021</a> function <a class="code" href="classcl__syoscb.html">cl_syoscb</a>::<a class="code" href="classcl__syoscb.html#a34d30eb8ec451e2257e972b427ebc9a7">new</a>(string name, uvm_component parent);
<a name="l00022"></a>00022    super.<a class="code" href="classcl__syoscb.html#a34d30eb8ec451e2257e972b427ebc9a7">new</a>(name, parent);
<a name="l00023"></a>00023 endfunction : <a class="code" href="classcl__syoscb.html#a34d30eb8ec451e2257e972b427ebc9a7">new</a>
<a name="l00024"></a>00024 
<a name="l00025"></a><a class="code" href="classcl__syoscb.html#aff5b55683b8bb74b5b75f607ac043602">00025</a> function void <a class="code" href="classcl__syoscb.html">cl_syoscb</a>::<a class="code" href="classcl__syoscb.html#aff5b55683b8bb74b5b75f607ac043602">build_phase</a>(uvm_phase phase);
<a name="l00026"></a>00026    <span class="comment">// TBD: This contradicts the paper. It states that a default one is created</span>
<a name="l00027"></a>00027    <span class="comment">// TBD push config further down?</span>
<a name="l00028"></a>00028    if (!uvm_config_db #(cl_syoscb_cfg)::get(this, &quot;&quot;, &quot;cfg&quot;, this.cfg))
<a name="l00029"></a>00029      `uvm_fatal(&quot;CFG&quot;, &quot;Configuration object not passed.&quot;)
<a name="l00030"></a>00030    <span class="comment">// TBD: This is snooping directly in the CFG - use get/set functions instead?</span>
<a name="l00031"></a>00031    this.<a class="code" href="classcl__syoscb.html#a4f5ac6f44453c7e25ad753723693c9d1">queues</a> = <a class="code" href="classcl__syoscb.html#a34d30eb8ec451e2257e972b427ebc9a7">new</a>[this.<a class="code" href="classcl__syoscb.html#ad2ae3f40dfef089783087874787ab1b7">cfg</a>.<a class="code" href="classcl__syoscb.html#a4f5ac6f44453c7e25ad753723693c9d1">queues</a>.size()];
<a name="l00032"></a>00032    begin
<a name="l00033"></a>00033      int unsigned idx = 0;
<a name="l00034"></a>00034      foreach(this.cfg.queues[queue_name]) begin
<a name="l00035"></a>00035       this.<a class="code" href="classcl__syoscb.html#a4f5ac6f44453c7e25ad753723693c9d1">queues</a>[idx] = <a class="code" href="classcl__syoscb__queue.html">cl_syoscb_queue</a>::type_id::create({&quot;queue&quot;, $psprintf(&quot;%0d&quot;,idx)}, this);
<a name="l00036"></a>00036          this.<a class="code" href="classcl__syoscb.html#ad2ae3f40dfef089783087874787ab1b7">cfg</a>.<a class="code" href="classcl__syoscb.html#a4f5ac6f44453c7e25ad753723693c9d1">queues</a>[queue_name] = this.<a class="code" href="classcl__syoscb.html#a4f5ac6f44453c7e25ad753723693c9d1">queues</a>[idx++];
<a name="l00037"></a>00037       end
<a name="l00038"></a>00038    end
<a name="l00039"></a>00039 
<a name="l00040"></a>00040    this.<a class="code" href="classcl__syoscb.html#a71521d7baf421c4f12073b16f71b8220">compare_strategy</a> = <a class="code" href="classcl__syoscb__compare.html">cl_syoscb_compare</a>::type_id::create(.name(&quot;compare_strategy&quot;), .parent(this));
<a name="l00041"></a>00041 
<a name="l00042"></a>00042    <span class="comment">// TBD: This should either be passed as args to constructor</span>
<a name="l00043"></a>00043    <span class="comment">//      or the objects should query the CFG DB directly if possible</span>
<a name="l00044"></a>00044    <span class="comment">//      The parent path is not available anymore after we changed to uvm_object</span>
<a name="l00045"></a>00045    this.<a class="code" href="classcl__syoscb.html#a71521d7baf421c4f12073b16f71b8220">compare_strategy</a>.compare_algo.set_cfg(this.cfg);
<a name="l00046"></a>00046       
<a name="l00047"></a>00047    begin
<a name="l00048"></a>00048       <a class="code" href="classcl__syoscb__report__catcher.html">cl_syoscb_report_catcher</a> catcher = <a class="code" href="classcl__syoscb.html#a34d30eb8ec451e2257e972b427ebc9a7">new</a>();
<a name="l00049"></a>00049       uvm_report_cb::add(null, catcher);
<a name="l00050"></a>00050    end
<a name="l00051"></a>00051 endfunction : <a class="code" href="classcl__syoscb.html#aff5b55683b8bb74b5b75f607ac043602">build_phase</a>
<a name="l00052"></a>00052 
<a name="l00053"></a><a class="code" href="classcl__syoscb.html#afa4a72326d0672809361fdc3e57fc78d">00053</a> function bit <a class="code" href="classcl__syoscb.html">cl_syoscb</a>::<a class="code" href="classcl__syoscb.html#afa4a72326d0672809361fdc3e57fc78d">compare</a>();
<a name="l00054"></a>00054    return(this.compare_strategy.compare());
<a name="l00055"></a>00055 endfunction: <a class="code" href="classcl__syoscb.html#afa4a72326d0672809361fdc3e57fc78d">compare</a>
<a name="l00056"></a>00056 <span class="comment"></span>
<a name="l00057"></a>00057 <span class="comment">///////////////////////////////////////</span>
<a name="l00058"></a>00058 <span class="comment"></span><span class="comment">// Function based API</span><span class="comment"></span>
<a name="l00059"></a>00059 <span class="comment">///////////////////////////////////////</span>
<a name="l00060"></a><a class="code" href="classcl__syoscb.html#a26c59c91c6fdd22f29a411cba2d5ed8f">00060</a> <span class="comment"></span>function void <a class="code" href="classcl__syoscb.html">cl_syoscb</a>::<a class="code" href="classcl__syoscb.html#a26c59c91c6fdd22f29a411cba2d5ed8f">add_item</a>(string queue_name, string producer, uvm_sequence_item item);
<a name="l00061"></a>00061    <span class="comment">// TBD: Add checks of correct queue and producer</span>
<a name="l00062"></a>00062    if(!this.cfg.queues[queue_name].add_item(producer, item)) begin
<a name="l00063"></a>00063      `uvm_fatal(&quot;QUEUE_ERROR&quot;, $sformatf(&quot;Unable to add item to queue: %s&quot;, queue_name));
<a name="l00064"></a>00064    end
<a name="l00065"></a>00065 
<a name="l00066"></a>00066    <span class="comment">// TBD: This should be revised according to how it was in the old SCB</span>
<a name="l00067"></a>00067    <span class="comment">// TBD: Return value from compare() should also be handled</span>
<a name="l00068"></a>00068    void&apos;(this.compare());
<a name="l00069"></a>00069 endfunction : <a class="code" href="classcl__syoscb.html#a26c59c91c6fdd22f29a411cba2d5ed8f">add_item</a>
<a name="l00070"></a>00070 <span class="comment"></span>
<a name="l00071"></a>00071 <span class="comment">///////////////////////////////////////</span>
<a name="l00072"></a>00072 <span class="comment"></span><span class="comment">// Transaction based API</span><span class="comment"></span>
<a name="l00073"></a>00073 <span class="comment">///////////////////////////////////////</span>
<a name="l00074"></a>00074 <span class="comment"></span><span class="comment">// TBD</span>
<a name="l00075"></a>00075 
<a name="l00076"></a><a class="code" href="classcl__syoscb.html#a065af329e4379b0416c7632c87158943">00076</a> function void <a class="code" href="classcl__syoscb.html">cl_syoscb</a>::<a class="code" href="classcl__syoscb.html#a065af329e4379b0416c7632c87158943">check_phase</a>(uvm_phase phase);
<a name="l00077"></a>00077    string queue_names[];
<a name="l00078"></a>00078    <a class="code" href="classcl__syoscb__queue__std.html">cl_syoscb_queue_std</a> queue;
<a name="l00079"></a>00079    super.<a class="code" href="classcl__syoscb.html#a065af329e4379b0416c7632c87158943">check_phase</a>(phase);
<a name="l00080"></a>00080 
<a name="l00081"></a>00081    this.<a class="code" href="classcl__syoscb.html#ad2ae3f40dfef089783087874787ab1b7">cfg</a>.get_queues(queue_names);
<a name="l00082"></a>00082    foreach (queue_names[i]) begin
<a name="l00083"></a>00083       $cast(queue, this.cfg.queues[queue_names[i]]);
<a name="l00084"></a>00084       if (queue.items.size()!=0) begin
<a name="l00085"></a>00085          string firstitem = queue.items[0].sprint();
<a name="l00086"></a>00086          `uvm_error(&quot;SYOSCB&quot;, $psprintf(&quot;Queue %s not empty, entries : %d, first element : \n%s&quot;, queue_names[i], queue.items.size(), firstitem));
<a name="l00087"></a>00087          <span class="comment">// TBD dump first parts of each queue !</span>
<a name="l00088"></a>00088          <span class="comment">// will we use std UVM report mechanisms or a special channel we can redirect ?</span>
<a name="l00089"></a>00089       end
<a name="l00090"></a>00090    end
<a name="l00091"></a>00091 endfunction : <a class="code" href="classcl__syoscb.html#a065af329e4379b0416c7632c87158943">check_phase</a>
<a name="l00092"></a>00092 
<a name="l00093"></a><a class="code" href="classcl__syoscb.html#ae54aafecd74c7f5a6531349d4bbe7c65">00093</a> function void <a class="code" href="classcl__syoscb.html">cl_syoscb</a>::<a class="code" href="classcl__syoscb.html#ae54aafecd74c7f5a6531349d4bbe7c65">report_phase</a>(uvm_phase phase);
<a name="l00094"></a>00094    super.<a class="code" href="classcl__syoscb.html#ae54aafecd74c7f5a6531349d4bbe7c65">report_phase</a>(phase);
<a name="l00095"></a>00095    <span class="comment">// TBD this should NOT  call the report phase of the compare method !</span>
<a name="l00096"></a>00096    <span class="comment">// as cl_syoscb_compare_base extends uvm_component the compare method should just perform its end of test checks in</span>
<a name="l00097"></a>00097    <span class="comment">// uvm_check_phase, from the UVM 1.1 class ref manual:</span>
<a name="l00098"></a>00098    <span class="comment">// uvm_build_phase      Create and configure of testbench structure</span>
<a name="l00099"></a>00099    <span class="comment">// uvm_connect_phase      Establish cross-component connections.</span>
<a name="l00100"></a>00100    <span class="comment">// uvm_end_of_elaboration_phase      Fine-tune the testbench.</span>
<a name="l00101"></a>00101    <span class="comment">// uvm_start_of_simulation_phase      Get ready for DUT to be simulated.</span>
<a name="l00102"></a>00102    <span class="comment">// uvm_run_phase      Stimulate the DUT.</span>
<a name="l00103"></a>00103    <span class="comment">// uvm_extract_phase      Extract data from different points of the verficiation environment.</span>
<a name="l00104"></a>00104    <span class="comment">// uvm_check_phase      Check for any unexpected conditions in the verification environment.</span>
<a name="l00105"></a>00105    <span class="comment">// uvm_report_phase      Report results of the test.</span>
<a name="l00106"></a>00106    <span class="comment">// uvm_final_phase      Tie up loose ends.</span>
<a name="l00107"></a>00107 endfunction : <a class="code" href="classcl__syoscb.html#ae54aafecd74c7f5a6531349d4bbe7c65">report_phase</a>
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<!--*************************************************************************-->
<!-- $Id: idv_dox_footer.html 136 2010-05-31 19:13:27Z seanoboyle $          -->
<!--*************************************************************************-->
<!--   This program is free software: you can redistribute it and/or modify  -->
<!--   it under the terms of the GNU General Public License as published by  -->
<!--   the Free Software Foundation, either version 3 of the License, or     -->
<!--   (at your option) any later version.                                   -->
<!--                                                                         -->
<!--   This program is distributed in the hope that it will be useful,       -->
<!--   but WITHOUT ANY WARRANTY; without even the implied warranty of        -->
<!--   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the         -->
<!--   GNU General Public License for more details.                          -->
<!--                                                                         -->
<!--   You should have received a copy of the GNU General Public License     -->
<!--   along with this program.  If not, see http://www.gnu.org/licenses/.   -->
<!--                                                                         -->
<!--*************************************************************************-->
<!-- Title:        IDV Doxygen Footer File                                   -->
<!-- Description:  This file is a doxygen footer with the IDV logo and a     -->
<!--               and a reference to the GNU FDL License.                   -->
<!--                                                                         -->
<!-- Original Author: Sean O'Boyle                                           -->
<!-- Contact:         seanoboyle@intelligentdv.com                           -->
<!-- Company:         Intelligent Design Verification                        -->
<!-- Company URL:     http://intelligentdv.com                               -->
<!--                                                                         -->
<!-- Download the most recent version here:                                  -->
<!--                  http://intelligentdv.com/downloads                     -->
<!--                                                                         -->
<!-- File Bugs Here:  http://bugs.intelligentdv.com                          -->
<!--        Project:  DoxygenFilterSV                                        -->
<!--                                                                         -->
<!-- File: idv_dox_header.xml                                                -->
<!-- $LastChangedBy: seanoboyle $                                            -->
<!-- $LastChangedDate: 2010-05-31 12:13:27 -0700 (Mon, 31 May 2010) $        -->
<!-- $LastChangedRevision: 136 $                                             -->
<!--                                                                         -->
<!--*************************************************************************-->

<br>
<table border="1" width = "100%">
  <tr>
    <td width = "20%">
       <address style="text-align: left;"><small>
       Project: SyoSil ApS UVM Scoreboard, Revision: 1.0.0.1<br>
       </small></address>
    </td>
    <td width = "60%">
       <address style="text-align: center;"><small>
       Copyright 2014 SyoSil ApS<br>
       All Rights Reserved Worldwide<br>
       <br>
      Licensed under the Apache License, Version 2.0 (the "License"); you may not
      use this file except in compliance with the License.  You may obtain a copy of
      the License at<br>
      <br>
       <a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a><br>
      <br>
      Unless required by applicable law or agreed to in writing, software distributed under the License is
      distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
      implied. See the License for the specific language governing permissions and limitations under
      the License.
       </small></address>
    </td>
    <td width = "20%">
      <address style="text-align: right;"><small>
      <a href="http://www.doxygen.org/index.html"><img src="doxygen.png" alt="doxygen" align="middle" border="0"></a><br>
      <a href="http://www.doxygen.org/index.html">Doxygen</a> Version: 1.6.1<br>
      <a href="http://www.intelligentdv.com/index.html">IDV SV Filter</a> Version: 2.6.2<br>
      Mon Nov 24 09:24:22 2014</small></address>
   </td>
  </tr>
</table>
<address style="text-align: left;"><small>
Find a documentation bug?  Report bugs to: <a href="http://bugs.intelligentdv.com/">bugs.intelligentdv.com</a> Project: DoxygenFilterSV
</small></address>
</body>
</html>
